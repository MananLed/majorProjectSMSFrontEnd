<div class="users">
  <div class="residents">
    <h3>Total Residents</h3>
    <div class="resident-count">
      <p-avatar label="{{noOfResidents}}" class="mr-1" size="large" id="label" />
    </div>
  </div>
  <div class="officers">
    <h3>Total Officers</h3>
    <div class="officer-count">
      <p-avatar label="{{noOfOfficers}}" class="mr-1" size="large" id="label" />
    </div>
  </div>
</div>
<br /><br /><br />

<div class="page-wrapper">
  <p-card class="card-container">
    <p-tabs value="0">
      <p-tablist>
        <p-tab value="0">Residents</p-tab>
        <p-tab value="1">Officers</p-tab>
      </p-tablist>
      <p-tabpanels>
        <p-tabpanel value="0">
          <br /><br />
          <p-table
            *ngIf="residentDetails?.data?.length > 0; else noResidents"
            [value]="residentDetails.data"
            [tableStyle]="{ 'min-width': '50rem' }"
            [paginator]="true"
            [rows]="5"
            [rowsPerPageOptions]="[5, 10, 20]"
          >
            <ng-template #header>
              <tr>
                <th>Name</th>
                <th>Mobile</th>
                <th>Email</th>
                <th>Flat</th>
                <th>Actions</th>
              </tr>
            </ng-template>
            <ng-template #body let-data>
              <tr>
                <td>
                  {{ data.first_name }} {{ data.middle_name }}
                  {{ data.last_name }}
                </td>
                <td>{{ data.mobile_number }}</td>
                <td>{{ data.email }}</td>
                <td>{{ data.flat }}</td>
                <td>
                  <p-button severity="danger" icon="pi pi-trash"></p-button>
                </td>
              </tr>
            </ng-template>
          </p-table>
          <ng-template #noResidents>
            <p>No Residents for now</p>
          </ng-template>
        </p-tabpanel>

        <p-tabpanel value="1">
          <div class="addOfficer">
            <p-button
              icon="pi pi-plus"
              pTooltip="Add Officer"
              (onClick)="showDialog()"
            />
          </div>
          <p-table
            *ngIf="officerDetails?.data?.length > 0; else noOfficers"
            [value]="officerDetails.data"
            [tableStyle]="{ 'min-width': '50rem' }"
            [paginator]="true"
            [rows]="5"
            [rowsPerPageOptions]="[5, 10, 20]"
          >
            <ng-template #header>
              <tr>
                <th>Name</th>
                <th>Mobile</th>
                <th>Email</th>
                <th>Actions</th>
              </tr>
            </ng-template>
            <ng-template #body let-data>
              <tr>
                <td>
                  {{ data.first_name }} {{ data.middle_name }}
                  {{ data.last_name }}
                </td>
                <td>{{ data.mobile_number }}</td>
                <td>{{ data.email }}</td>
                <td>
                  <p-button severity="danger" icon="pi pi-trash"></p-button>
                </td>
              </tr>
            </ng-template>
          </p-table>
          <ng-template #noOfficers>
            <p>No officers for now</p>
          </ng-template>
        </p-tabpanel>
      </p-tabpanels>
    </p-tabs>
  </p-card>
</div>

<p-dialog
  header="Add Officer"
  [modal]="true"
  [(visible)]="visible"
  [style]="{ width: '25rem' }"
>
  <span class="p-text-secondary block mb-8">Enter the details</span>
  <br /><br />
  <p-floatlabel variant="on">
    <input
      pInputText
      type="text"
      id="email"
      [(ngModel)]="officerEmail"
      autocomplete="off"
    />
    <label for="email">Email</label>
  </p-floatlabel>
  <br />
  <p-floatlabel variant="on">
    <input
      pInputText
      id="password"
      [(ngModel)]="officerPassword"
      autocomplete="off"
    />
    <label for="password">Password</label>
  </p-floatlabel>
  <br /><br />
  <div class="buttons">
    <p-button
      label="Cancel"
      severity="contrast"
      (onClick)="hideDialog()"
    ></p-button>
    <p-button label="Add" (onClick)="addOfficer()"></p-button>
  </div>
</p-dialog>

@if (isFetching()) {
<app-loader></app-loader>
}
